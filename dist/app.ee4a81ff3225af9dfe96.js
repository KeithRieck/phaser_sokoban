!function(e){function t(t){for(var n,a,s=t[0],l=t[1],u=t[2],c=0,p=[];c<s.length;c++)a=s[c],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&p.push(r[a][0]),r[a]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);for(h&&h(t);p.length;)p.shift()();return i.push.apply(i,u||[]),o()}function o(){for(var e,t=0;t<i.length;t++){for(var o=i[t],n=!0,s=1;s<o.length;s++){var l=o[s];0!==r[l]&&(n=!1)}n&&(i.splice(t--,1),e=a(a.s=o[0]))}return e}var n={},r={1:0},i=[];function a(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,a),o.l=!0,o.exports}a.m=e,a.c=n,a.d=function(e,t,o){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(o,n,function(t){return e[t]}.bind(null,n));return o},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var h=l;i.push([660,0,3]),o()}({1762:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WelcomeScene=void 0;var n,r=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),i=o(151),a=(n=i)&&n.__esModule?n:{default:n};t.WelcomeScene=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{key:"WelcomeScene"}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Scene),r(t,[{key:"preload",value:function(){console.log("WelcomeScene preload"),this.load.image("background","assets/background.png"),this.load.image("target","assets/i1.gif"),this.load.image("wall","assets/i2.gif"),this.load.image("box","assets/i3.gif"),this.load.image("box2","assets/i4.gif"),this.load.image("player","assets/i5.gif"),this.load.image("empty","assets/i7.gif"),this.load.image("btn_enabled","assets/btn_enabled.png"),this.load.image("btn_disabled","assets/btn_disabled.png"),this.load.image("btn_rollover","assets/btn_rollover.png"),this.load.image("sokoban_logo","assets/sokoban_logo.png"),this.load.json("textures","assets/tilemaps/sokoban.json"),this.load.json("level0","assets/tilemaps/level0.json"),this.load.json("level1","assets/tilemaps/level1.json"),this.load.json("level2","assets/tilemaps/level2.json"),this.load.json("level3","assets/tilemaps/level3.json")}},{key:"create",value:function(){this.scene.start("level0")}}]),t}()},1763:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SokobanScene=void 0;var n=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),r=o(1764),i=o(1765),a=o(1766);t.SokobanScene=function(e){function t(e,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{key:e}));return n.name=e,n.next=o,n.boxGroup=null,n.player=null,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Phaser.Scene),n(t,[{key:"create",value:function(){console.log("SokobanScene create: "+this.name);var e=this.game.TILESIZE,t=this.game.INDENT;this.add.image(this.game.config.width/2,this.game.config.height/2,"background");var o=this.cache.json.get(this.name);this.boxGroup=new Phaser.GameObjects.Group,this.player=new i.PlayerSprite(this,10,10),this.game.TILESIZE=o.tilewidth,this.mapData=o.layers[0];for(var n=0;n<this.mapData.height;n++)for(var r=0;r<this.mapData.width;r++)this.isWall(r,n)?this.add.image(r*e+t,n*e,"wall"):this.isTarget(r,n)?this.add.image(r*e+t,n*e,"target"):this.isEmpty(r,n)&&this.add.image(r*e+t,n*e,"empty");this.resetBoard(),this.add.image(t/2,25,"sokoban_logo"),this.resetButton=new a.Button(this,t/2,60,"btn_enabled","btn_disabled","btn_rollover","Reset"),this.resetButton.setCallback(this.resetBoard,this),null!=this.next&&(this.nextButton=new a.Button(this,t/2,110,"btn_enabled","btn_disabled","btn_rollover","Next"),this.nextButton.setCallback(function(){this.scene.start(this.next)},this),this.nextButton.setEnabled(!1)),this.leftKey=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.LEFT),this.rightKey=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.RIGHT),this.upKey=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.UP),this.downKey=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.DOWN)}},{key:"update",value:function(){Phaser.Input.Keyboard.JustDown(this.leftKey)&&this.moveLeft(),Phaser.Input.Keyboard.JustDown(this.rightKey)&&this.moveRight(),Phaser.Input.Keyboard.JustDown(this.upKey)&&this.moveUp(),Phaser.Input.Keyboard.JustDown(this.downKey)&&this.moveDown(),null!=this.next&&this.nextButton.setEnabled(this.isComplete()&&null!=this.next)}},{key:"resetBoard",value:function(){this.boxGroup.clear(!0,!0),this.player.destroy(),this.boxGroup=new Phaser.GameObjects.Group,this.player=new i.PlayerSprite(this,10,10),this.add.existing(this.player);for(var e=0;e<this.mapData.height;e++)for(var t=0;t<this.mapData.width;t++)if(this.isPlayer(t,e))this.player.moveTo(t,e);else if(this.isBox(t,e)){var o=new r.BoxSprite(this,t,e);this.add.existing(o),this.boxGroup.add(o),o.setTarget(this.isTarget(t,e))}}},{key:"isPlayer",value:function(e,t){return 6==this.mapData.data[e+t*this.mapData.width]}},{key:"isWall",value:function(e,t){return 5==this.mapData.data[e+t*this.mapData.width]}},{key:"isEmpty",value:function(e,t){return!this.getBox(e,t)&&5!=this.mapData.data[e+t*this.mapData.width]}},{key:"isTarget",value:function(e,t){var o=this.mapData.data[e+t*this.mapData.width];return 7==o||2==o}},{key:"isBox",value:function(e,t){var o=this.mapData.data[e+t*this.mapData.width];return 4==o||2==o}},{key:"getBox",value:function(e,t){var o=!0,n=!1,r=void 0;try{for(var i,a=this.boxGroup.children.entries[Symbol.iterator]();!(o=(i=a.next()).done);o=!0){var s=i.value;if(s.xPos==e&&s.yPos==t)return s}}catch(e){n=!0,r=e}finally{try{!o&&a.return&&a.return()}finally{if(n)throw r}}return null}},{key:"isComplete",value:function(){var e=!0,t=!1,o=void 0;try{for(var n,r=this.boxGroup.children.entries[Symbol.iterator]();!(e=(n=r.next()).done);e=!0){var i=n.value;if(!this.isTarget(i.xPos,i.yPos))return!1}}catch(e){t=!0,o=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw o}}return!0}},{key:"moveUp",value:function(){var e=this.getBox(this.player.xPos,this.player.yPos-1);e?this.isEmpty(this.player.xPos,this.player.yPos-2)&&(this.player.moveUp(),e.moveUp(),e.setTarget(this.isTarget(e.xPos,e.yPos))):this.isWall(this.player.xPos,this.player.yPos-1)||this.player.moveUp()}},{key:"moveDown",value:function(){var e=this.getBox(this.player.xPos,this.player.yPos+1);e?this.isEmpty(this.player.xPos,this.player.yPos+2)&&(this.player.moveDown(),e.moveDown(),e.setTarget(this.isTarget(e.xPos,e.yPos))):this.isWall(this.player.xPos,this.player.yPos+1)||this.player.moveDown()}},{key:"moveLeft",value:function(){var e=this.getBox(this.player.xPos-1,this.player.yPos);e?this.isEmpty(this.player.xPos-2,this.player.yPos)&&(this.player.moveLeft(),e.moveLeft(),e.setTarget(this.isTarget(e.xPos,e.yPos))):this.isWall(this.player.xPos-1,this.player.yPos)||this.player.moveLeft()}},{key:"moveRight",value:function(){var e=this.getBox(this.player.xPos+1,this.player.yPos);e?this.isEmpty(this.player.xPos+2,this.player.yPos)&&(this.player.moveRight(),e.moveRight(),e.setTarget(this.isTarget(e.xPos,e.yPos))):this.isWall(this.player.xPos+1,this.player.yPos)||this.player.moveRight()}}]),t}()},1764:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BoxSprite=void 0;var n=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),r=o(659);t.BoxSprite=function(e){function t(e,o,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,"box",o,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.SokobanSprite),n(t,[{key:"setTarget",value:function(e){e?this.setTexture("box2"):this.setTexture("box")}}]),t}()},1765:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlayerSprite=void 0;var n=o(659);t.PlayerSprite=function(e){function t(e,o,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,"player",o,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n.SokobanSprite),t}()},1766:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Button=void 0;var n=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}();o(151);t.Button=function(e){function t(e,o,n,r,i,a,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var l=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return l.scene=e,l.x=o,l.y=n,l.enabled=!0,l.enabledImage=r,l.disabledImage=i,l.rolloverImage=a,l.button=l.scene.add.sprite(0,0,r).setInteractive(),l.text=l.scene.add.text(0,0,s,{fontFamily:"Verdana, Tahoma, serif",fontSize:"16px",fill:"#fff"}),Phaser.Display.Align.In.Center(l.text,l.button),l.add(l.button),l.add(l.text),l.button.on("pointerover",function(){this.enabled&&this.button.setTexture(a)}.bind(l)),l.button.on("pointerout",function(){this.button.setTexture(r)}.bind(l)),l.scene.add.existing(l),l}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Phaser.GameObjects.Container),n(t,[{key:"setCallback",value:function(e,t){this.button.on("pointerdown",e.bind(t))}},{key:"setEnabled",value:function(e){e?(this.button.setTexture(this.enabledImage),this.button.setInteractive()):(this.button.setTexture(this.disabledImage),this.button.disableInteractive()),this.enabled=e}}]),t}()},659:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SokobanSprite=void 0;var n,r=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),i=o(151),a=(n=i)&&n.__esModule?n:{default:n};t.SokobanSprite=function(e){function t(e,o){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n*e.game.TILESIZE+e.game.INDENT,r*e.game.TILESIZE,o));return i.game=e.game,i.xPos=n,i.yPos=r,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.GameObjects.Sprite),r(t,[{key:"moveTo",value:function(e,t){this.xPos=e,this.yPos=t,this.x=this.xPos*this.game.TILESIZE+this.game.INDENT,this.y=this.yPos*this.game.TILESIZE,this.depth=10}},{key:"moveUp",value:function(){this.moveTo(this.xPos,this.yPos-1)}},{key:"moveDown",value:function(){this.moveTo(this.xPos,this.yPos+1)}},{key:"moveLeft",value:function(){this.moveTo(this.xPos-1,this.yPos)}},{key:"moveRight",value:function(){this.moveTo(this.xPos+1,this.yPos)}}]),t}()},660:function(e,t,o){o(661),e.exports=o(863)},863:function(e,t,o){"use strict";var n,r=o(151),i=(n=r)&&n.__esModule?n:{default:n},a=o(1762),s=o(1763);var l={type:Phaser.AUTO,width:800,height:600,parent:"content",scene:[new a.WelcomeScene,new s.SokobanScene("level0","level1"),new s.SokobanScene("level1","level2"),new s.SokobanScene("level2","level3"),new s.SokobanScene("level3",null)],physics:{default:"arcade",arcade:{debug:!1}}},u=new i.default.Game(l);u.TILESIZE=36,u.INDENT=150}});